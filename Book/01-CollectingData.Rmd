# Collecting Data

<!-- r set_parent('Lock5withR.Rnw') -->


`r chapter <- 0`


<!-- In this chapter we discuss graphical and numerical summaries of data.  These notes focus primarily on how to get (ref:R-package)  to do the work for you.  The text book includes more information about why and when to use various kinds of summaries. -->


## The Structure of Data

### Cases and Variables {-}

Data sets in R are usually stored as **data frames** in a rectangular arrangement with rows corresponding to observational units and columns corresponding to variables.  A number of data sets are built into (ref:R-package)  and its packages. The package for our text is **`Lock5withR`** which comes with a number of data sets. <!-- 1.4 p.13 -->


```{r echo=TRUE, results="hide", message=FALSE}

require(Lock5withR)  # Tell R to use the package for our text book
require(mosaic) # Tell R to use the package for creating plots
data(StudentSurvey) # load the StudentSurvey data set

```

----

Imagine data as a 2-dimensional structure (like a spreadsheet).

#. Rows correspond to **observational units** (people, animals, plants, or other objects we are collecting data about).
#. Columns correspond to **variables** (measurements collected on each observational unit).
#. At the intersection of a row and a column is the **value** of the variable for a particular observational unit.

----

<!-- end boxedText -->
Observational units go by many names, depending on the kind of thing being studied.  Popular names include subjects, individuals, and cases. Whatever you call them, it is important that you always understand what your observational units are.

Let's take a look at the data frame for the Student Survey example in the text. If we type the name of the data set, (ref:R-package)  will display it in its entirety for us. However, <span style="color:blue">StudentSurvey</span> is a larger data set, so it is more useful to look at some sort of summary or subset of the data. <!-- 1.4 p14 -->


#### Table 1.1  {-}
```{r Table1.1}
head(StudentSurvey) # first six cases of the data set
```


We can easily classify variables as either **categorical** or **quantitative** by studying the result of `head()()`, but there are some summaries of the data set which reveal such information.
```{r Data1.1}
str(StudentSurvey)     # structure of the data set
summary(StudentSurvey) # summary of each variable
inspect(StudentSurvey) # summary of each variable
```


Here are some more summaries:
```{r Data1.1b}
nrow(StudentSurvey) # number of rows
ncol(StudentSurvey) # number of columns
dim(StudentSurvey)  # number of rows and columns
```


Many of the datasets in R  have useful help files that describe the data and explain how they were collected or give references to the original studies. You can access this information for the <span style="color:blue">StudentSurvey</span> data set by typing
```{r Data1.1c, tidy=FALSE, eval=FALSE}
?StudentSurvey
```


We'll learn how to make more customized summaries (numerical and graphical) soon. For now, it is only important to observe how the organization of data in R  reflects the observational units and variables in the data set.

This is important if you want to construct your own data set (in Excel or a google spreadhseet, for example) that you will later import into R  You want to be sure that the structure of your spread sheet uses rows and columns in this same way, and that you don't put any extra stuff into the spread sheet.  It is a good idea to include an extra row at the top which names the variables. Take a look at Chapter 0 to learn how to get the data from Excel into R. 

### Categorical and Quantitative Variables  {-}

<!-- begin description -->


#. **categorical variable** a variable that places observational units into one of two or more categories (examples: color, sex, case/control status, species, etc.)

    These can be further sub-divided into ordinal and nominal variables. If the categories have a natural and meaningful order, we will call them **ordered** or **ordinal** variables.  Otherwise, they are **nominal** variables.

#. **quantitative variable** a variable that records measurements along some scale (examples: weight, height, age, temperature) or counts something (examples: number of siblings, number of colonies of bacteria, etc.)

    Quantitative variables can be **continuous** or **discrete**. Continuous variables can (in principle) take on any real-number value in some range. Values of discrete variables are limited to some list and "in-between values" are not possible. Counts are a good example of discrete variables.

<!-- end description -->

### Investigating Variables and Relationships between Variables {-}

```{r Data1.2}
head(AllCountries)
inspect(AllCountries)
AllCountries[86, ]
```


### Using Data to Answer a Question {-}

<!-- begin description -->

#. **response variable**
a variable we are trying to predict or explain
#. **explanatory variable**
a variable used to predict or explain a response variable
<!-- end description -->


## Sampling from a Population

### Samples from Populations {-}

<!-- begin description -->

#. **population** 
the collection of animals, plants, objects, etc. that we want to know about
#. **sample**
the (smaller) set of animals, plants, objects, etc. about which we have data
#. **parameter**
a number that describes a population or model.
#. **statistic**
a number that describes a sample.
<!-- end description -->

Much of statistics centers around this question:

----

_What can we learn about a population from a sample?_ 

----


### Sampling Bias {-}

Often we are interested in knowing (approximately) the value of some parameter.  A statistic used for this purpose is called an **estimate**.  For example, if you want to know the mean length of the tails of lemurs (that's a _parameter_), you might take a sample of lemurs and measure their tails.  The mean length of the tails of the lemurs in your sample is a _statistic_.  It is also an _estimate_, because we use it to estimate the parameter.

Statistical estimation methods attempt to 
<!-- begin itemize -->

#. reduce **bias**, and 
#. increase **precision**.
<!-- end itemize -->

<!-- begin description -->

#. **bias**
the systematic tendency of sample estimates to either overestimate or underestimate population parameters; that is, a _systematic tendency to be off in a particular direction_.
#. **precision**
the measure of how close estimates are to the thing being estimated (called the **estimand**).
<!-- end description -->

### Simple Random Sample {-}

**Sampling** is the process of selecting a sample.  Statisticians use **random samples** 
<!-- begin itemize -->

#.  
to avoid (or at least reduce) **bias**, and 
#. so they can quantify **sampling variability** (the amount samples differ from each other), which in turn allows us to quantify precision.
<!-- end itemize -->

The simplest kind of random sample is called a **simple random sample** (aren't statisticians clever about naming things?).  A simple random sample is equivalent to putting all individuals in the population into a big hat, mixing thoroughly, and selecting some out of the hat to be in the sample.  In particular, in a simple random sample, _every individual has an equal chance to be in the sample_, in fact, every subset of the population of a fixed size has an equal chance to be in the sample.

Other sampling methods include
<!-- begin description -->

#. **convenience sampling** using whatever individuals are easy to obtain

This is usually a terrible idea.  If the convenient members of the population differ from the inconvenient members, then the sample will not be representative of the population.

#. **volunteer sampling** using people who volunteer to be in the sample

This is usually a terrible idea.  Most likely the volunteers will differ in some ways from the non-volunteers, so again the sample will not be representative of the population.

#. **systematic sampling** sampling done in some systematic way 
(every tenth unit, for example).  

This can sometimes be a reasonable approach.

#. **stratified sampling** sampling separately in distinct sub-populations (called _strata_) 

This is more complicated (and sometimes necessary) but fine as long as the sampling methods in each stratum are good and the analysis takes the sampling method into account.

<!-- end description -->

<!-- The block below should be commented out -->
<!-- If a poor sampling method is chosen, the sample may not be representative of the population we are trying to study, leading us to draw inaccurate or incorrect conclusions. -->

#### Example 1.15 {-}
```{r Example1.15}
sample(AllCountries, 5)
```



## Experiments and Observational Studies

### Confounding Variables {-}

#### Table 1.2 {-}
```{r Table1.2}
head(LifeExpectancyVehicles, 10)
Sub <- filter(LifeExpectancyVehicles, Year %% 4==2)
Sub
```

<!-- fix for every 4 years? -->


#### Figure 1.2 {-}
```{r Figure1.2, tidy=FALSE}
gf_point(LifeExpectancy ~ Vehicles, xlab = "Vehicles (millions)", ylab = "Life Expectancy", 
       data = LifeExpectancyVehicles)
```


### Observational Studies vs. Experiments {-}

Statisticians use the word experiment to mean something very specific. _In an **experiment**, the researcher determines the values of one or more (explanatory) variables_, typically by random assignment. If there is no such assignment by the researcher, the study is an **observational study**.